import{reactExports as e,jsxRuntimeExports as i}from"./vendor-C7aDIlXh.es.js";import{MEDIA_EDITOR_VIEW as t,useSduiExpression as n,useSduiStore as a,useSduiState as s,CROP_RATIOS as o,filesWithEditDataToMediaList as l,useMediaImageEditor as d,getFileUrl as r,MediaImageEditorCanvas as m,MediaEditorToolbar as g,MediaFileManager as p,MediaEditorViewWrapper as C,MediaImageFilters as _,MediaAltTextEditor as c}from"./sdui-D0_6Y-1Y.es.js";import{useI18n as E}from"./como-BydPKCTN.es.js";import{Box as x,Image as j,Column as I,Button as u}from"./ui-DaMPIZcj.es.js";/* empty css                    */import"./delux-sortable-B5LILHvz.es.js";let y=Object.freeze(Object.defineProperty({__proto__:null,MediaEditorV2:function({input:y,editorConfig:f,outputMediaList:R,onComplete:h,tagEditor:A}={}){let[T,O]=e.useState(t.FILE_MANAGER),[N,F]=e.useState(0),M=n(y),b=n(f?.enableImageFilters),v=n(f?.enableImageAdjustmentSliders),{setValue:L}=a(),k=s(R?.key),{t:w}=E(),D=o[f?.supportedCropRatios?.[0]??"CropRatio_Original"]||o.CropRatio_Original,G=e.useCallback((e,i)=>{if(!M?.mediaFiles)return;let t=l([{file:e,editData:i}],!0);R?.key&&t&&L(R?.key,t)},[M,R?.key,L]),[S,B]=d(M?.mediaFiles?.[N],D,e.useCallback((e,i)=>{G(e,i),O(t.FILE_MANAGER)},[G])),K=k?.mediaFiles?.[N]??M?.mediaFiles?.[N],P=K?r(K):void 0;return i.jsxs(x,{display:"grid",style:{height:"100%",gridTemplateColumns:"3fr 2fr 0.5fr",gridTemplateRows:"1fr auto auto"},children:[i.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",style:{gridColumn:"1",gridRow:"1",overflow:"hidden"},children:T===t.IMAGE_EDITOR?i.jsx(m,{canvasKey:S.canvasKey,onReady:S.onReady,hasContentCredentials:S.hasContentCredentials,isImageEdited:S.isImageEdited,isContentCredentialsTooltipOpen:S.isContentCredentialsTooltipOpen,setIsContentCredentialsTooltipOpen:S.setIsContentCredentialsTooltipOpen,isContentCredentialsWarningOpen:S.isContentCredentialsWarningOpen,setIsContentCredentialsWarningOpen:S.setIsContentCredentialsWarningOpen}):i.jsx(j,{src:P,a11yText:w("media_editor_image_preview"),imageScalingType:"contain",width:"100%",height:"100%"})}),T===t.FILE_MANAGER&&i.jsx(x,{display:"flex",justifyContent:"center",style:{gridColumn:"1",gridRow:"2"},children:i.jsx(g,{activeView:T,onViewChange:O})}),i.jsx(x,{inset:"2x",display:"flex",flexDirection:"column",style:{gridColumn:"2",gridRow:"1 / 3",overflow:"auto"},children:i.jsxs(I,{gap:"2x",height:"100%",children:[T===t.FILE_MANAGER&&i.jsx(p,{input:M?.mediaFiles,selectedIndex:N,onSelectionChange:F}),T===t.IMAGE_EDITOR&&i.jsx(C,{title:w("media_editor_edit"),onBack:()=>O(t.FILE_MANAGER),children:i.jsx(_,{imageRef:S.imageRef,editData:S.editData,initialZoom:S.initialZoom,initialStraightenAngle:S.initialStraightenAngle,initialRotate:S.initialRotate,onEdit:S.onImageEdit,enableImageFilters:b,enableImageAdjustmentSliders:v,isImageEdited:S.isImageEdited,onApplyEdits:B})}),T===t.TAG_EDITOR&&i.jsx(C,{title:w("media_editor_add_tag"),onBack:()=>O(t.FILE_MANAGER),children:A}),T===t.ALT_TEXT_EDITOR&&i.jsx(C,{title:w("media_editor_add_alt_text"),onBack:()=>O(t.FILE_MANAGER),children:i.jsx(c,{})})]})}),i.jsx(x,{borderTop:"divider",insetX:"3x",insetY:"1.5x",tagName:"footer",justifyContent:"flexEnd",display:"flex",style:{gridColumn:"1 / 4",gridRow:"3"},children:i.jsx(u,{category:"primary",isEmphasized:!0,onClick:h,text:w("media_editor_save")})})]})}},Symbol.toStringTag,{value:"Module"}));export{y as CLIENT_COMPONENT_f2b4d044c030b948b6809a8941429c7a};